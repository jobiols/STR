-
  Test module curso

  First I create a product to define a curso
-
  !record {model: product.product, id: curso_product_1}:
    name: Curso de maquillaje Social Profesional
    tot_hs_lecture: 10
    classes_per_week: 1
    hs_lecture: 5
    default_code: SPR
    list_price: 800
    type: 'service'
    agenda: tema uno, tema dos, tema tres
    no_quotes: 10
-
  Then I create a curso based on this product
-
  !record {model: curso.curso, id: curso_curso_1}:
    product: curso_product_1
-
  I check that state is draft and instance is 1
-
  !assert {model: curso.curso, id: curso_curso_1, severity: error, string: State should be draft.}:
    - state == 'draft'
    - instance == 1
-
  Then I create another curso based on this product
-
  !record {model: curso.curso, id: curso_curso_2}:
    product: curso_product_1
-
  I check that instance is 2
-
  !assert {model: curso.curso, id: curso_curso_2, severity: error, string: Instance does not increment correctly.}:
    - instance == 2
-
  I create an schedule
-
  !record {model: curso.schedule, id: curso_schedule_1}:
    start_time: 4
    end_time: 6
-
  I check that name is ok
-
  !assert {model: curso.schedule, id: curso_schedule_1, severity: error, string: 'Name should be 04:00 - 06:00 (2hs)'}:
    - name == '04:00 - 06:00 (2hs)'
-
  I modify curso 2 to add date and schedule
-
  !record {model: curso.curso, id: curso_curso_2}:
    schedule_1: curso_schedule_1
    date_begin: '2015-01-11'
-
  I add a lecture
-
  !record {model: curso.lecture, id: curso_lecture_1}:
    date: '2015-01-11'
    desc: Primera clase del curso
    curso_id: curso_curso_2
    schedule_id: curso_schedule_1
-
  I add a Student
-
  !record {model: res.partner, id: res_partner_1}:
    name: Juana Alumna
    date: '1962-01-01'
    customer: True
-
  I Register the student in the course
-
  !record {model: curso.registration, id: curso_registration_1}:
    curso_id: curso_curso_2
    partner_id: res_partner_1
-
  I make Juana sign the course
-
   !python {model: curso.registration}: |
     self.button_reg_sign(cr, uid, [ref("curso_registration_1")],context=context)
-
  I Begin the course ---------------------------------------------
-
   !python {model: curso.registration}: |
     self.button_reg_confirm(cr, uid, [ref("curso_registration_1")],context=context)

